{"version":3,"sources":["SFcrime.js"],"names":[],"mappings":"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","file":"all.js","sourcesContent":["      //constants for indices of vehicle_theft_data element fields \n      var DATA = {'LONGITUDE':0,'LATITUDE':1,'DISTRICT':2};\n      //constants for indices of vehicle theft date data element fields\n      var DATE_DATA = {'DAY':0,'DATE':1,'TIME':2,'DESC':3,'ADDR':4,'ISAM':5};\n      var DISTRICT_CIRCLE = {'COLOR': {'ON':'red','OFF':'transparent'},'OPACITY': {'ON':0.4,'OFF':0}};\n      var LEVEL = {'DISTRICT':13,'HEAT_MAP':14,'UNIQUE_MARKER':15}\n      var baseurl = '/google-maps-sf-crime-vis';\n      var vehicle_theft_data;\n      var vehicle_theft_date_data;\n      var vehicle_theft_district_data;\n      var sf_district_bios;\n      var lastValidCenter;\n      var curZoomLevel = 13;\n      var current_marker;\n      var heatmap = {}; //dictionary of heatmaps per district\n      var heatmapData = []; //array of heat map pts grouped by district ex 'TARAVAL'\n      var district_markers = [];\n      var unique_markers = []; //array of marker objects grouped by description ex 'STOLEN VEHICLE'\n      var gradients = [];\n      var heatmap_all;\n      var heatmapData_all = []; //used for toggling heatmap display mode from district view or individual markers\n      var map;\n    // bounds of the desired area\n      var allowedBounds = new google.maps.LatLngBounds(\n          new google.maps.LatLng(37.590059187414685, -122.63448208007815),\n          new google.maps.LatLng(37.80174049420249, -122.3091720214844)\n      );\n      var marker_icons = [ {'name': \"STOLEN VEHICLE\", 'icon': baseurl+'/assets/sf_crime_icons/car.png', 'inactive_icon':baseurl+'/assets/sf_crime_icons/car-inactive.png'},\n                           {'name': \"ATTEMPTED STOLEN VEHICLE\", 'icon': baseurl+'/assets/sf_crime_icons/car-attempted.png', 'inactive_icon':baseurl+'/assets/sf_crime_icons/car-inactive.png'},\n                           {'name': \"STOLEN AND RECOVERED VEHICLE\", 'icon':  baseurl+'/assets/sf_crime_icons/car-recovered.png', 'inactive_icon':baseurl+'/assets/sf_crime_icons/car-inactive.png'},\n                           {'name': \"STOLEN MOTORCYCLE\", 'icon': baseurl+'/assets/sf_crime_icons/motorcycle2.png', 'inactive_icon':baseurl+'/assets/sf_crime_icons/motorcycle-inactive.png'},\n                           {'name': \"STOLEN TRUCK\", 'icon': baseurl+'/assets/sf_crime_icons/truck2.png','inactive_icon':baseurl+'/assets/sf_crime_icons/truck-inactive.png'}]\n      \n      //only one infowindow needed to avoid clutter\n      var infowindow = new google.maps.InfoWindow(\n          {\n            maxWidth: 340\n          });\n\n      google.maps.InfoWindow.prototype.isOpen = function(){\n        var map = infowindow.getMap();\n        return (map !== null && typeof map !== \"undefined\");\n      }\n\n      //determine which style is active\n      var isDay = true;\n      //lunar landing stype from snazzy maps \n      var nightStyles = {\n        styles: [{\"stylers\":[{\"hue\":\"#ff1a00\"},{\"invert_lightness\":true},{\"saturation\":-100},{\"lightness\":33},{\"gamma\":0.5}]},{\"featureType\":\"water\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#2D333C\"}]}]\n      };\n      //pale dawn style from snazzy maps\n      var dayStyles = {styles: [{\"featureType\":\"water\",\"stylers\":[{\"visibility\":\"on\"},{\"color\":\"#acbcc9\"}]},{\"featureType\":\"landscape\",\"stylers\":[{\"color\":\"#f2e5d4\"}]},{\"featureType\":\"road.highway\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#c5c6c6\"}]},{\"featureType\":\"road.arterial\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#e4d7c6\"}]},{\"featureType\":\"road.local\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#fbfaf7\"}]},{\"featureType\":\"poi.park\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#c5dac6\"}]},{\"featureType\":\"administrative\",\"stylers\":[{\"visibility\":\"on\"},{\"lightness\":33}]},{\"featureType\":\"road\"},{\"featureType\":\"poi.park\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"on\"},{\"lightness\":20}]},{},{\"featureType\":\"road\",\"stylers\":[{\"lightness\":20}]}]\n      };\n\n      function addDistrictData(){\n        $.each( vehicle_theft_district_data.PdDistrict, function( i, district){\n            var loc = new google.maps.LatLng(vehicle_theft_district_data.Y[i], vehicle_theft_district_data.X[i]);\n            var magnitude = vehicle_theft_district_data.Total[i];\n            var marker = new MarkerWithLabel({\n              position: loc,\n              map: map,\n              title: district,\n              animation: google.maps.Animation.DROP,\n              icon: getCircle(magnitude,DISTRICT_CIRCLE.COLOR.ON,DISTRICT_CIRCLE.OPACITY.ON),\n              labelContent: \"<div class='district_font_size'>\"+district+\"<div class='district_total'>\"+magnitude+\"</div></div>\",\n              labelAnchor: new google.maps.Point(50, 10),\n              labelClass: \"district_labels\", \n              labelStyle: {opacity: 0.9},\n              labelInBackground: false\n            });\n\n            district_markers[i] = marker;\n\n            google.maps.event.addListener(marker, 'dblclick', function() {\n                marker.setVisible(false);\n                map.setCenter(marker.position);\n                map.setZoom(LEVEL.UNIQUE_MARKER);\n            });\n\n            google.maps.event.addListener(marker, 'click', function() {\n              var district_bio = $('#district_bio');\n              if(heatmap[i].getMap() != null){\n                heatmap[i].setMap(null);\n                marker.setIcon(getCircle(magnitude,DISTRICT_CIRCLE.COLOR.ON,DISTRICT_CIRCLE.OPACITY.ON));\n                var data = district_bio.data('current_district');\n                if(data != undefined && data === district)\n                  district_bio.addClass('hide');\n              }\n              else{\n                marker.setIcon(getCircle(magnitude,DISTRICT_CIRCLE.COLOR.OFF,DISTRICT_CIRCLE.OPACITY.OFF));\n                heatmap[i].setMap(map);\n                district_bio.data('current_district',district);\n                district_bio.html(getDistrictBio(district));\n                district_bio.removeClass('hide');\n              }\n            });\n          }\n        );\n       };\n\n      function initializeHeatMapArray(){\n        $.each(vehicle_theft_district_data.PdDistrict, function(i, district){\n          heatmapData[district] = [];\n          heatmap[i] = district;\n          gradients[i] =  [\n              'rgba(0, 255, 255, 0)',\n              'rgba(0, 255, 255, 1)',\n              'rgba(0, 191, 255, 1)',\n              'rgba(0, 127, 255, 1)',\n              'rgba(0, 63, 255, 1)',\n              'rgba(0, 0, 255, 1)',\n              'rgba(0, 0, 223, 1)',\n              'rgba(0, 0, 191, 1)',\n              'rgba(0, 0, 159, 1)',\n              'rgba(0, 0, 127, 1)',\n              'rgba(63, 0, 91, 1)',\n              'rgba(127, 0, 63, 1)',\n              'rgba(191, 0, 31, 1)',\n              'rgba(255, 0, 0, 1)',\n            ];\n        });\n      }\n\n      function addHeatMapData(){\n        $.each( vehicle_theft_data, function(i,data) {\n            var lat = data[DATA.LATITUDE];\n            var lng = data[DATA.LONGITUDE];\n            var district = data[DATA.DISTRICT];\n            var location = new google.maps.LatLng(lat, lng); \n            heatmapData[district].push(location);\n            heatmapData_all.push(location);\n        });\n\n        $.each( heatmap, function(i, district){\n          heatmap[i] = new google.maps.visualization.HeatmapLayer({\n            data: heatmapData[district],\n            gradient: gradients[i]\n          });\n          heatmap[i].setMap(null);\n          });\n\n        heatmap_all = new google.maps.visualization.HeatmapLayer({\n            data: heatmapData_all\n          });\n          heatmap_all.setMap(null); \n        \n      };\n\n      function getDistrictBio(district){\n        for(var i=0;i<sf_district_bios.length;i++){\n          var district_obj = sf_district_bios[i];\n          if(district_obj.district === district){\n            var content = document.createElement('div');\n            content.className = \"bio-window min-width\";\n            content.innerHTML = \"<h3>\"+district+\" District Bio<h3>\";\n            for(var index=0;index< district_obj.full_name.length;index++){\n              var innerDiv = document.createElement('div');\n              innerDiv.className = \"border-row\";\n              innerDiv.innerHTML =  \"<h4 class='spacing'>\"+district_obj.full_name[index]+\"</h4>\"+\n                                    \"<div><p>\"+district_obj.description[index]+\"</p></div>\"+\n                                    '<a href=\"'+district_obj.url[index]+'\" target=\"_blank\">Read more</a>'\n                                    \n              content.appendChild(innerDiv);\n            }\n            return content;\n          }\n        }\n      }\n\n      function getUniqueIcon(description){\n        for(var i=0; i<marker_icons.length;i++){\n          if(marker_icons[i].name === description)\n            return marker_icons[i].icon;\n        }\n        return marker_icons[0].icon; //default stolen automobile icon\n      }\n\n      function addUniqueData(){\n        var normal_size = new google.maps.Size(28, 33);\n        var scaled_size = new google.maps.Size(32,37);\n        var normal_anchor = new google.maps.Point(16, 33);\n        var scaled_anchor = new google.maps.Point(16, 37);\n\n        var updateIcon = function(marker,icon,size,anchor){\n          icon.scaledSize = size;\n          icon.size = size;\n          icon.anchor = anchor;\n          marker.setIcon(icon);\n        } \n\n        $.each( vehicle_theft_date_data, function( i, data){\n          var loc  = heatmapData_all[i];\n          var time = data[DATE_DATA.TIME];\n          var isAM = data[DATE_DATA.ISAM];\n          var date = data[DATE_DATA.DATE];\n          var day  = data[DATE_DATA.DAY];\n          var address   = data[DATE_DATA.ADDR];\n          var description = data[DATE_DATA.DESC];\n          var content = \"<div class='infowindow'>\"+\n                            \"<h3>\"+description+\"</h3>\"+\n                            \"<div><span>address:</span> \"+address+\"</div>\"+\n                            \"<div><span>date: </span> \"+date+\" \"+day+\" \"+time+\" \"+isAM+\"</div>\"+\n                        \"</div>\"\n          \n          var marker_array = unique_markers[description]\n          if(marker_array == undefined)\n            return false; //skip this datapoint because it has an abnormal description not handled by legend\n          var icon = {\n            url: getUniqueIcon(description),\n            size: normal_size,\n            scaledSize : normal_size,\n            origin: new google.maps.Point(0,0),\n            anchor: normal_anchor\n          };\n          var marker = new google.maps.Marker({\n            position: loc,\n            map: map,\n            title: description,\n            icon: icon, \n            visible: false\n          });\n          \n          marker_array.push(marker);\n          var activateIcon = function(){updateIcon(marker,icon,scaled_size,scaled_anchor);}\n          var normalizeIcon = function(){updateIcon(marker,icon,normal_size,normal_anchor);}\n          google.maps.event.addListener(marker,'mouseover',activateIcon);\n\n          google.maps.event.addListener(marker,'mouseout',function(){\n            if(current_marker != marker)\n              normalizeIcon();\n          });\n\n          google.maps.event.addListener(marker, 'click', function() {\n            var is_next_marker = current_marker != marker;\n            if(infowindow.isOpen()){\n              google.maps.event.trigger(infowindow,'closeclick'); //we always want to close infowindow on second click and reset\n            }\n            if(is_next_marker){\n              current_marker = marker;\n              infowindow.setContent(content);\n              infowindow.open(map,marker);\n              google.maps.event.addListenerOnce(infowindow,'closeclick',function(){\n                normalizeIcon();\n                current_marker = undefined;\n                infowindow.close();\n            });\n            }\n          });\n       \n        }\n      );\n     };\n\n     function getCircle(magnitude,fColor,fOpacity) {\n        return {\n          path: google.maps.SymbolPath.CIRCLE,\n          fillColor: fColor,\n          fillOpacity: fOpacity,\n          scale: 0.25*magnitude,\n          strokeColor: 'white',\n          strokeWeight: 0\n        };\n      };\n\n      function setMarkersVisible(markers,state){\n         $.each(markers,function(i,marker){\n            marker.setVisible(state);\n          });\n      }\n\n      function setHeatmapVisible(state){\n        if(state)\n          heatmap_all.setMap(map);\n        else\n          heatmap_all.setMap(null);\n      }\n\n      function toggleMapStyle(){\n        if(isDay)\n          map.setOptions(nightStyles);\n        else\n          map.setOptions(dayStyles);\n        isDay = !isDay;\n      }\n\n      function toggleHeatmap() {\n          if(heatmap_all.getMap()){\n            setHeatmapVisible(false);\n            setMarkersVisible(district_markers,true);\n          }else{\n            setMarkersVisible(district_markers,false);\n            setHeatmapVisible(true);\n          }\n      }\n\n      function toggleMarkers(markers){\n        if(markers[0].getVisible())\n          setMarkersVisible(markers,false);\n        else\n          setMarkersVisible(markers,true);\n      }\n\n      function toggleUniqueMarkers(turnOn){\n        if(turnOn){\n          $('.active-icon').each(function(){\n            setMarkersVisible(unique_markers[this.name],true);\n          });\n        }\n        else{\n           $('.active-icon').each(function(){\n            setMarkersVisible(unique_markers[this.name],false);\n          });\n        }\n      }\n\n      function toggleDistrictMarkers(){\n        toggleMarkers(district_markers);\n      }\n     \n      function centerChangedEventHandler() {\n        if (allowedBounds.contains(map.getCenter())) {\n          // still within valid bounds, so save the last valid position\n          lastValidCenter = map.getCenter();\n        } else{\n          // not valid anymore => return to last valid position\n          map.panTo(lastValidCenter);\n        }\n        }\n\n      function zoomChangeEventHandler() {\n          var zoomLevel = map.getZoom();\n          var legend = $('#legend');\n          $('#zoom_level').text('Zoom Level: ' + zoomLevel);\n\n          //conditions to turn on district view\n          if(zoomLevel <= LEVEL.DISTRICT){\n            if(zoomLevel < curZoomLevel){\n              if(heatmap_all.getMap())\n                toggleHeatmap(); //turn off\n                toggleUniqueMarkers(false); //turn off\n            } \n            else if(!district_markers[0].getVisible())\n              toggleDistrictMarkers(); //turn on\n          }\n          //conditions to turn on heat map view\n          if(zoomLevel == LEVEL.HEAT_MAP){\n            if(zoomLevel < curZoomLevel)\n              toggleUniqueMarkers(false); //turn off\n            if(heatmap_all.getMap() == null) //if off turn on\n              toggleHeatmap();\n          }\n          //conditions to turn on unique markers view\n          if(zoomLevel >= LEVEL.UNIQUE_MARKER){\n            legend.removeClass('hide');\n            if(heatmap_all.getMap()) //turn off heat map view\n              setHeatmapVisible(false);\n            toggleUniqueMarkers(true);\n            //turn on based on active legend symbols\n          }else{\n            if(legend.hasClass('hide') == false)\n              legend.addClass('hide');\n          }\n\n        //infowindow only relevant when zoom is high enough to see symbols\n          if(zoomLevel < LEVEL.UNIQUE_MARKER){\n            infowindow.close();\n          }\n          curZoomLevel = zoomLevel;\n        }\n\n      function setUpLegend(){\n        var legend = document.getElementById('legend');\n        var container = document.createElement('div');\n        container.innerHTML = \"<div><h3>Interactive Legend</h3><div>\";\n        container.className = 'bio-window slide';\n        container.id = 'inner_legend';\n        $.each(marker_icons, function(i,marker){\n          var name = marker.name;\n          var icon = marker.icon;\n          var inactive_icon = marker.inactive_icon;\n          var symbolDiv = document.createElement('div');\n          var image = document.createElement('img');\n\n          unique_markers[name] = []; //setup uniquemarkers array of arrays\n          image.setAttribute('src',icon);\n          image.setAttribute('id','legend-icon'+i);\n          image.className = 'active-icon'; //all icons start active\n          image.name = name; //stored name in image to reference later when toggling unique marker visibility\n          symbolDiv.appendChild(image);\n          symbolDiv.innerHTML += name;\n          container.appendChild(symbolDiv);\n        });\n        legend.appendChild(container);\n        legend.innerHTML += \"<a id='legend_arrow' class='arrow sprite-up-arrow' href='javascript:void(0)'></a>\";\n        $('#legend_arrow').click((e) => {\n          let updateArrow = () => {$(e.target).toggleClass(\"sprite-up-arrow sprite-down-arrow\");};\n          $('#inner_legend').slideToggle(\"linear\",updateArrow);\n        });\n\n        $.each(marker_icons,function(i,marker){\n          let icon = marker.icon;\n          let inactive_icon = marker.inactive_icon;\n          $('#legend-icon'+i).click((e) => {\n            let target = $(e.target);\n            if(target.hasClass('inactive-icon')){\n              target.attr('src',icon);\n              target.toggleClass(\"active-icon inactive-icon\");\n              setMarkersVisible(unique_markers[marker.name],true);\n            }\n            else{  \n              target.attr('src',inactive_icon);\n              target.toggleClass(\"active-icon inactive-icon\");\n              setMarkersVisible(unique_markers[marker.name],false);\n            }\n          });\n        });\n      }\n    \n      function initialize() {\n        let sanFrancisco = new google.maps.LatLng(37.78763688993816, -122.42317685292451);\n        let mapOptions = {\n          center: sanFrancisco,\n          zoom: curZoomLevel,\n          minZoom: 12,\n          streetViewControl: false,\n          mapTypeId: google.maps.MapTypeId.ROAD\n        };\n\n        map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);\n        map.controls[google.maps.ControlPosition.RIGHT_TOP].push(document.getElementById('panel'));\n        map.controls[google.maps.ControlPosition.LEFT_TOP].push(document.getElementById('zoom_level'));\n        map.setOptions(dayStyles);\n        \n        $('#zoom_level').text('Zoom Level: ' + curZoomLevel);\n        lastValidCenter = map.getCenter();\n        google.maps.event.addListener(map, 'center_changed', centerChangedEventHandler);\n        google.maps.event.addListener(map, 'zoom_changed', zoomChangeEventHandler);\n      }\n\n      $.when(\n        // Get all the data points for vehicle thefts\n        $.getJSON(baseurl+'/assets/vehicle.theft.json', function(json) {\n          vehicle_theft_data =  json;\n        }),\n        // Get the PdDistrict mean locations and numbers\n        $.getJSON(baseurl+\"/assets/vehicle.theft.location.json\", function(json) {\n          vehicle_theft_district_data = json;\n        }),\n        $.getJSON(baseurl+\"/assets/vehicle.theft.date.json\", function(json) {\n          vehicle_theft_date_data = json;\n        }),\n        // Get text descriptions of districts and url links to read more\n        $.getJSON(baseurl+\"/assets/sf_district_bios.json\", function(json) {\n          sf_district_bios = json;\n        })\n\n      ).then(function() {//consider adding on fail or on progress function handling\n        // All is ready now\n        initialize();\n        addDistrictData();\n        initializeHeatMapArray();\n        addHeatMapData();\n        setUpLegend();\n        addUniqueData();\n      });"],"sourceRoot":"/source/"}